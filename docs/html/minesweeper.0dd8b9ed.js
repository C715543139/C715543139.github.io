const t=document.getElementById("map"),e=t.getContext("2d"),l=document.getElementById("counter"),r=window.devicePixelRatio;var n,f,o,i=9,u=9,a=10,c=!0;function d(){t.style.width=50*u+"px",t.style.height=50*i+"px",t.width=u*r*50,t.height=i*r*50,e.scale(r,r),n=Array.from({length:i+2},()=>Array(u+2).fill(0)),f=Array.from({length:i+2},()=>Array(u+2).fill(1)),c=!0,o=0,l.textContent=`\u{5360} ${a-o}`,function(){for(let t=0;t<i;t++)for(let l=0;l<u;l++)(t+l)%2==0?e.fillStyle="white":e.fillStyle="lightgray",e.fillRect(50*l,50*t,50,50)}()}function m(t,e){return[Math.floor(t/50)+1,Math.floor(e/50)+1]}function h(t,e){return[(t-1)*50,(e-1)*50]}function s(t,e){if(0!==n[e][t])return -1;let l=0;for(let r=-1;r<2;r++)for(let f=-1;f<2;f++)(0!==r||0!==f)&&(l+=n[e+r][t+f]);return l}function y(t,l){let r=m(t,l),n=r[0],o=r[1];if(n<1||o<1||n>u||o>i)return;let a=h(n,o),c=a[0],g=a[1];if(0===function(t,l){if(t<1||l<1||t>u||l>i)return;let r=h(t,l),n=r[0],o=r[1];if(1===f[l][t]){let r=s(t,l);if(-1!==r)return e.clearRect(n,o,51,51),0!==r&&(e.font="40px Arial",e.fillStyle="white",e.fillText(r.toString(),n+13.5,o+39)),f[l][t]=0,r;alert("GAME OVER!"),d()}}(n,o))for(let t=-1;t<2;t++)for(let e=-1;e<2;e++)y(c+50*t,g+50*e)}function g(){for(let t=1;t<=i;t++)for(let e=1;e<u;e++)if(1===f[t][e]&&0===n[t][e])return;alert("YOU WIN!"),location.reload()}d(),t.addEventListener("click",t=>{t.preventDefault(),c&&(function(t,e){let l=m(t,e),r=l[0],f=l[1],o=0;for(;o<a;){let t=Math.floor(Math.random()*i)+1,e=Math.floor(Math.random()*u)+1;(t!==f||e!==r)&&1!==n[t][e]&&(n[t][e]=1,o++)}}(t.offsetX,t.offsetY),c=!1),y(t.offsetX,t.offsetY),g()}),t.addEventListener("contextmenu",t=>{t.preventDefault(),function(t,r){if(o>=a)return;let n=m(t,r),i=n[0],u=n[1],c=h(i,u),d=c[0],s=c[1];1===f[u][i]?(e.font="30px Arial",e.fillStyle="black",e.fillText("占",d+9,s+37),f[u][i]=2,o++,l.textContent=`\u{5360} ${a-o}`):2===f[u][i]&&((i+u)%2==0?e.fillStyle="white":e.fillStyle="lightgray",e.fillRect(d,s,50,50),f[u][i]=1,o--,l.textContent=`\u{5360} ${a-o}`)}(t.offsetX,t.offsetY),2===f[1][2]&&2===f[1][3]&&alert("12/13:\uD83C\uDF82永泽生日快乐~\uD83C\uDF82")}),t.addEventListener("dblclick",t=>{t.preventDefault(),function(t,e){let l=m(t,e),r=l[0],n=l[1];if(r<1||n<1||r>u||n>i||0!==f[n][r])return;let o=h(r,n),a=o[0],c=o[1],d=0;for(let t=-1;t<2;t++)for(let e=-1;e<2;e++)2===f[n+t][r+e]&&d++;if(d>=s(r,n))for(let t=-1;t<2;t++)for(let e=-1;e<2;e++)y(a+50*t,c+50*e)}(t.offsetX,t.offsetY),g()}),document.getElementById("restart").addEventListener("click",()=>{d()}),document.getElementById("mode").addEventListener("click",()=>{let t=Number(prompt("请输入地图宽度(9-25)","9"));if(null==t||t<9||t>99){alert("无效的宽度！");return}let e=Number(prompt("请输入地图高度(9-25)","9"));if(null==e||e<9||e>99){alert("无效的高度！");return}let l=Number(prompt("请输入地雷数量(10-100)","10"));if(null==l||l<10||l>100){alert("无效的数量！");return}if(l>=t*e){alert("已经装不下了口牙！");return}u=t,i=e,a=l,d()});
//# sourceMappingURL=minesweeper.0dd8b9ed.js.map
