let t,e,l;const r=document.getElementById("map"),n=r.getContext("2d"),f=document.getElementById("counter"),o=window.devicePixelRatio;let i=9,u=9,a=10,c=!0;function d(){r.style.width=50*u+"px",r.style.height=50*i+"px",r.width=u*o*50,r.height=i*o*50,n.scale(o,o),t=Array.from({length:i+2},()=>Array(u+2).fill(0)),e=Array.from({length:i+2},()=>Array(u+2).fill(1)),c=!0,l=0,f.textContent=`\u{5360} ${a-l}`,function(){for(let t=0;t<i;t++)for(let e=0;e<u;e++)(t+e)%2==0?n.fillStyle="white":n.fillStyle="lightgray",n.fillRect(50*e,50*t,50,50)}()}function m(t,e){return[Math.floor(t/50)+1,Math.floor(e/50)+1]}function h(t,e){return[(t-1)*50,(e-1)*50]}function s(e,l){if(0!==t[l][e])return -1;let r=0;for(let n=-1;n<2;n++)for(let f=-1;f<2;f++)(0!==n||0!==f)&&(r+=t[l+n][e+f]);return r}function y(t,l){let r=m(t,l),f=r[0],o=r[1];if(f<1||o<1||f>u||o>i)return;let a=h(f,o),c=a[0],g=a[1];if(0===function(t,l){if(t<1||l<1||t>u||l>i)return;let r=h(t,l),f=r[0],o=r[1];if(1===e[l][t]){let r=s(t,l);if(-1!==r)return n.clearRect(f,o,51,51),0!==r&&(n.font="40px Arial",n.fillStyle="white",n.fillText(r.toString(),f+13.5,o+39)),e[l][t]=0,r;alert("GAME OVER!"),d()}}(f,o))for(let t=-1;t<2;t++)for(let e=-1;e<2;e++)y(c+50*t,g+50*e)}function g(){for(let l=1;l<=i;l++)for(let r=1;r<u;r++)if(1===e[l][r]&&0===t[l][r])return;alert("YOU WIN!"),location.reload()}d(),r.addEventListener("click",e=>{e.preventDefault(),c&&(function(e,l){let r=m(e,l),n=r[0],f=r[1],o=0;for(;o<a;){let e=Math.floor(Math.random()*i)+1,l=Math.floor(Math.random()*u)+1;(e!==f||l!==n)&&1!==t[e][l]&&(t[e][l]=1,o++)}}(e.offsetX,e.offsetY),c=!1),y(e.offsetX,e.offsetY),g()}),r.addEventListener("contextmenu",t=>{t.preventDefault(),function(t,r){if(l>=a)return;let o=m(t,r),i=o[0],u=o[1],c=h(i,u),d=c[0],s=c[1];1===e[u][i]?(n.font="30px Arial",n.fillStyle="black",n.fillText("占",d+9,s+37),e[u][i]=2,l++,f.textContent=`\u{5360} ${a-l}`):2===e[u][i]&&((i+u)%2==0?n.fillStyle="white":n.fillStyle="lightgray",n.fillRect(d,s,50,50),e[u][i]=1,l--,f.textContent=`\u{5360} ${a-l}`)}(t.offsetX,t.offsetY)}),r.addEventListener("dblclick",t=>{t.preventDefault(),function(t,l){let r=m(t,l),n=r[0],f=r[1];if(n<1||f<1||n>u||f>i||0!==e[f][n])return;let o=h(n,f),a=o[0],c=o[1],d=0;for(let t=-1;t<2;t++)for(let l=-1;l<2;l++)2===e[f+t][n+l]&&d++;if(d>=s(n,f))for(let t=-1;t<2;t++)for(let e=-1;e<2;e++)y(a+50*t,c+50*e)}(t.offsetX,t.offsetY),g()}),document.getElementById("restart").addEventListener("click",()=>{d()}),document.getElementById("mode").addEventListener("click",()=>{let t=Number(prompt("请输入地图宽度(9-25)","9"));if(null==t||t<9||t>99){alert("无效的宽度！");return}let e=Number(prompt("请输入地图高度(9-25)","9"));if(null==e||e<9||e>99){alert("无效的高度！");return}let l=Number(prompt("请输入地雷数量(10-100)","10"));if(null==l||l<10||l>100){alert("无效的数量！");return}if(l>=t*e){alert("已经装不下了口牙！");return}u=t,i=e,a=l,d()});
//# sourceMappingURL=minesweeper.5742eed2.js.map
